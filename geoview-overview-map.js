"use strict";(self.webpackChunkgeoview_core=self.webpackChunkgeoview_core||[]).push([[375],{8173:(e,t,n)=>{var o=n(1292),a=n(4702),i=n(19),r=n(9510),s=n(2746),l=n(7576),c=n(3110),p=n(7287),u=n(3457),m=n(4751),d=n(5202),g=window.cgpv,f=g.api,h=g.react,v=g.reactLeaflet,x=g.reactLeafletCore,C=f.eventNames,w=h.useState,E=h.useEffect,y=h.useCallback,b=h.useMemo,I=v.useMapEvent,Z=x.useEventHandlers;function z(e){var t=e.parentId,n=e.parentMap,o=e.zoomFactor,a=e.minimap,i=w(!1),r=(0,u.Z)(i,2),s=r[0],l=r[1],c=y((function(e){n.setView(e.latlng,n.getZoom())}),[n]);I("click",c);var p=w({height:0,width:0,top:0,left:0}),g=(0,u.Z)(p,2),h=g[0],v=g[1];function x(){var e=n.getZoom()-o>0?n.getZoom()-o:0;a.flyTo(n.getCenter(),e),setTimeout((function(){a.invalidateSize();var e=a.latLngToContainerPoint(n.getBounds().getSouthWest()),t=a.latLngToContainerPoint(n.getBounds().getNorthEast());v({height:e.y-t.y,width:t.x-e.x,top:t.y,left:e.x})}),500)}E((function(){return x(),f.event.on(C.OVERVIEW_MAP.EVENT_OVERVIEW_MAP_TOGGLE,(function(e){(0,m.$E)(e)&&t===e.handlerName&&(x(),l(e.status))}),t),function(){f.event.off(C.OVERVIEW_MAP.EVENT_OVERVIEW_MAP_TOGGLE,t)}}),[]);var z=y((function(){x()}),[a,n,o]),k=b((function(){return{moveend:z,zoomend:z}}),[z]);return Z({instance:n,context:{__version:1,map:n}},k),s?(0,d.jsx)("div",{}):(0,d.jsx)("div",{style:{left:"".concat(h.left,"px"),top:"".concat(h.top,"px"),width:"".concat(h.width,"px"),height:"".concat(h.height,"px"),display:"block",opacity:.5,position:"absolute",border:"1px solid rgb(0, 0, 0)",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e3}})}var k=window.cgpv,P=k.api,j=k.react,R=k.leaflet,V=k.ui,M=k.constants,T=k.useTranslation,_=P.eventNames,O=j.useState,L=j.useEffect,N=j.useRef,B=R.DomEvent,S=V.elements,A=S.IconButton,F=S.ChevronLeftIcon,W=M.leafletPositionClasses,G=V.makeStyles((function(e){return{toggleBtn:{transform:"rotate(45deg)",color:e.palette.primary.contrastText,zIndex:e.zIndex.tooltip,"&:hover":{cursor:"pointer"}},toggleBtnContainer:{zIndex:e.zIndex.tooltip},minimapOpen:{transform:"rotate(-45deg)"},minimapClosed:{transform:"rotate(135deg)"}}}));function D(e){var t=e.parentId,n=e.minimap,o=N(null),a=T().t,i=O(!0),r=(0,u.Z)(i,2),s=r[0],l=r[1],c=G(),g=V.useTheme();return L((function(){B.disableClickPropagation((0,p.RF)(o.current))}),[]),(0,d.jsx)("div",{ref:o,className:"".concat(W.topright," ").concat(c.toggleBtnContainer),children:(0,d.jsx)(A,{className:"leaflet-control ".concat(c.toggleBtn," ").concat(s?c.minimapClosed:c.minimapOpen),style:{margin:"-".concat(g.spacing(3)),padding:0,height:"initial",minWidth:"initial"},"aria-label":a("mapctrl.overviewmap.toggle"),onClick:function(){return function(){if(l(!s),s){var e,o=null===(e=g.overrides.button)||void 0===e?void 0:e.size;n.getContainer().style.width=o.width,n.getContainer().style.height=o.height}else n.getContainer().style.width=H.width,n.getContainer().style.height=H.height;P.event.emit((0,m.s9)(_.OVERVIEW_MAP.EVENT_OVERVIEW_MAP_TOGGLE,t,s))}()},size:"large",children:(0,d.jsx)(F,{})})})}var H={width:"150px",height:"150px"},Q=window.cgpv,$=Q.api,q=Q.react,J=Q.leaflet,K=Q.reactLeaflet,U=Q.ui,X=Q.constants,Y=q.useState,ee=q.useEffect,te=q.useRef,ne=q.useMemo,oe=J.DomEvent,ae=K.MapContainer,ie=K.TileLayer,re=U.useMediaQuery,se=U.useTheme,le=U.makeStyles,ce=X.leafletPositionClasses,pe=le((function(e){return{minimap:{width:H.width,height:H.height,"-webkit-transition":"300ms linear","-moz-transition":"300ms linear","-o-transition":"300ms linear","-ms-transition":"300ms linear",transition:"300ms linear","&::before":{content:'""',display:"block",position:"absolute",width:0,height:0,borderTop:"32px solid hsla(0,0%,98%,0.9)",borderLeft:"32px solid transparent",zIndex:e.zIndex.appBar,right:0,top:0}}}}));function ue(e){var t=e.id,n=e.crs,o=e.zoomFactor,a=Y(),i=(0,u.Z)(a,2),r=i[0],s=i[1],l=pe(),c=se(),m=re(c.breakpoints.up("md")),g=$.map(t).map,f=g.getZoom()-o>0?g.getZoom()-o:0,h=$.map(t).basemap.getBasemapLayers(),v=te(null);ee((function(){var e=(0,p.RF)(v.current);e&&(oe.disableClickPropagation(e),oe.disableScrollPropagation(e))}),[]);var x=ne((function(){return(0,d.jsx)(ae,{className:l.minimap,center:g.getCenter(),zoom:f,crs:n,dragging:!1,doubleClickZoom:!1,scrollWheelZoom:!1,attributionControl:!1,zoomControl:!1,whenCreated:function(e){var t=e.getContainer();oe.disableClickPropagation(t),oe.disableScrollPropagation(t),t.parentElement.style.margin=c.spacing(3),s(e)},children:r?(0,d.jsxs)(d.Fragment,{children:[h.map((function(e){return(0,d.jsx)(ie,{url:e.url},e.id)})),(0,d.jsx)(z,{parentId:t,parentMap:g,minimap:r,zoomFactor:o}),(0,d.jsx)(D,{parentId:t,minimap:r})]}):(0,d.jsx)("div",{})})}),[g,n,f,h,o,r]);return m?(0,d.jsx)("div",{style:{zIndex:1100},className:ce.topright,children:(0,d.jsx)("div",{ref:v,className:"leaflet-control leaflet-bar",children:x})}):(0,d.jsx)("div",{})}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,s.Z)(this,n)}}var de=window,ge=function(e){(0,r.Z)(n,e);var t=me(n);function n(){var e;(0,o.Z)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r)),(0,c.Z)((0,i.Z)(e),"translations",{"en-CA":{},"fr-CA":{}}),(0,c.Z)((0,i.Z)(e),"added",(function(){var t=e.pluginProps.mapId,n=de.cgpv.api,o=n.map(t),a=o.language,i=o.projection,r=o.getMapOptions,s=o.currentProjection;n.map(t).addComponent("overviewMap",(0,d.jsx)(ue,{id:t,language:a,crs:i.getCRS(),zoomFactor:r(s).zoomFactor}))})),e}return(0,a.Z)(n,[{key:"removed",value:function(){var e=this.pluginProps.mapId;de.cgpv.api.map(e).removeComponent("overviewMap")}}]),n}(p.EV);de.plugins=de.plugins||{},de.plugins["overview-map"]=(0,p.RF)(ge)}},e=>{var t;t=8173,e(e.s=t)}]);