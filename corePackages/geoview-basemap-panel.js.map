{"version":3,"file":"corePackages/geoview-basemap-panel.js","mappings":"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","sources":["webpack://geoview-core/../geoview-basemap-panel/src/basemap-panel.tsx","webpack://geoview-core/../geoview-basemap-panel/src/basemap-panel-style.ts","webpack://geoview-core/../geoview-basemap-panel/src/index.tsx"],"sourcesContent":["import {\n  toJsonObject,\n  TypeBasemapProps,\n  TypeJsonObject,\n  TypeJsonArray,\n  SelectChangeEvent,\n  TypeWindow,\n  TypeBasemapOptions,\n  TypeValidMapProjectionCodes,\n  TypeDisplayLanguage,\n  useAppDisplayLanguage,\n  getLocalizedMessage,\n} from 'geoview-core';\nimport { useMapProjection } from 'geoview-core/src/core/stores/store-interface-and-intial-values/map-state';\nimport { getSxClasses } from './basemap-panel-style';\n\nconst w = window as TypeWindow;\n\ninterface BaseMapPanelProps {\n  mapId: string;\n  config: TypeJsonObject;\n}\n\nexport function BasemapPanel(props: BaseMapPanelProps): JSX.Element {\n  const { mapId, config } = props;\n\n  const { cgpv } = w;\n  const myMap = cgpv.api.maps[mapId];\n\n  const { api, ui, react } = cgpv;\n  const { Select, Card, Box } = ui.elements;\n\n  const { useState, useEffect } = react;\n\n  const theme = ui.useTheme();\n  const sxClasses = getSxClasses(theme);\n\n  // internal state and store values\n  const [basemapList, setBasemapList] = useState<TypeBasemapProps[]>([]);\n  const [activeBasemapId, setActiveBasemapId] = useState<string>('');\n  const [canSwichProjection] = useState(config.canSwichProjection);\n  const projections: number[] =\n    (config.supportedProjections as TypeJsonArray).map((obj: TypeJsonObject) => obj?.projectionCode as number) || [];\n  const storeProjection = useMapProjection();\n  const [mapProjection, setMapProjection] = useState(storeProjection);\n  const language = useAppDisplayLanguage();\n\n  // #region PRIVATE UTILITY FUNCTIONS\n  /**\n   * Get basemap thumbnail url\n   *\n   * @param {string[]} basemapTypes basemap layer type (shaded, transport, label, simple)\n   * @param {TypeValidMapProjectionCodes} projection basemap projection\n   * @param {TypeDisplayLanguage} displayLanguage basemap language\n   *\n   * @returns {string[]} array of thumbnail urls\n   */\n  function getThumbnailUrl(\n    basemapTypes: string[],\n    projection: TypeValidMapProjectionCodes,\n    displayLanguage: TypeDisplayLanguage\n  ): string[] {\n    const thumbnailUrls: string[] = [];\n\n    for (let typeIndex = 0; typeIndex < basemapTypes.length; typeIndex++) {\n      const type = basemapTypes[typeIndex];\n\n      if (type === 'transport') {\n        if (myMap.basemap.basemapsList[projection].transport?.url) {\n          thumbnailUrls.push(\n            (myMap.basemap.basemapsList[projection].transport?.url as string)\n              .replace('{z}', '8')\n              .replace('{y}', projection === 3978 ? '285' : '91')\n              .replace('{x}', projection === 3978 ? '268' : '74')\n          );\n        }\n      }\n\n      if (type === 'simple') {\n        // Only available in 3978\n        if (myMap.basemap.basemapsList[projection].simple?.url) {\n          thumbnailUrls.push(\n            (myMap.basemap.basemapsList[projection].simple.url as string).replace('{z}', '8').replace('{y}', '285').replace('{x}', '268')\n          );\n        }\n      }\n\n      if (type === 'shaded') {\n        // Only available in 3978\n        if (myMap.basemap.basemapsList[projection].shaded?.url) {\n          thumbnailUrls.push(\n            (myMap.basemap.basemapsList[projection].shaded.url as string).replace('{z}', '8').replace('{y}', '285').replace('{x}', '268')\n          );\n        }\n      }\n\n      if (type === 'label') {\n        if (myMap.basemap.basemapsList[projection].label?.url) {\n          thumbnailUrls.push(\n            (myMap.basemap.basemapsList[projection].label.url as string)\n              .replaceAll('xxxx', displayLanguage === 'en' ? 'CBMT' : 'CBCT')\n              .replace('{z}', '8')\n              .replace('{y}', projection === 3978 ? '285' : '91')\n              .replace('{x}', projection === 3978 ? '268' : '74')\n          );\n        }\n      }\n\n      if (type === 'osm') {\n        thumbnailUrls.push('https://tile.openstreetmap.org/0/0/0.png');\n      }\n    }\n\n    return thumbnailUrls;\n  }\n\n  /**\n   * Get basemap information (name and description)\n   *\n   * @param {string[]} basemapTypes basemap layer type (shaded, transport, label, simple)\n   * @returns { name: string; description: string } array with information [name, description]\n   */\n  function getInfo(basemapTypes: string[]): { name: string; description: string } {\n    let name = '';\n    let description = '';\n\n    if (basemapTypes.includes('transport')) {\n      name = getLocalizedMessage(mapId, 'basemapPanel.info.transport.name');\n      description = getLocalizedMessage(mapId, 'basemapPanel.info.transport.description');\n    } else if (basemapTypes.includes('simple')) {\n      name = getLocalizedMessage(mapId, 'basemapPanel.info.simple.name');\n    } else if (basemapTypes.includes('shaded')) {\n      name = getLocalizedMessage(mapId, 'basemapPanel.info.shaded.name');\n      description = getLocalizedMessage(mapId, 'basemapPanel.info.shaded.description');\n    } else if (basemapTypes.includes('osm')) {\n      name = getLocalizedMessage(mapId, 'basemapPanel.info.osm.name');\n    } else if (basemapTypes.includes('nogeom')) {\n      name = getLocalizedMessage(mapId, 'basemapPanel.info.nogeom.name');\n    }\n\n    if (basemapTypes.includes('label')) name = `${name} ${getLocalizedMessage(mapId, 'basemapPanel.info.label.name')}`;\n\n    return { name, description };\n  }\n  // #endregion\n\n  /**\n   * Update the basemap with the layers on the map\n   *\n   * @param {string} id update the basemap on the map\n   */\n  const setBasemap = (basemapId: string) => {\n    // get basemap from id\n    const basemap = basemapList.find((item) => item.basemapId === basemapId);\n\n    // set the new basemap and update the active basemap variable\n    if (basemap !== undefined) {\n      myMap.basemap.setBasemap(basemap);\n      setActiveBasemapId(basemapId);\n    }\n  };\n\n  /**\n   *  Add basemaps from configuration for selected projection\n   *\n   * @param {number} projection the projection to create basemaps for\n   */\n  const createBasemapArray = async (projection: TypeValidMapProjectionCodes) => {\n    const basemapsArray = toJsonObject(\n      (config.supportedProjections as Array<TypeJsonObject>).find((obj: TypeJsonObject) => obj.projectionCode === projection)\n    );\n    let isInit = false;\n\n    // reset the basemaps array\n    setBasemapList([]);\n\n    // create the custom config basemap\n    for (let basemapIndex = 0; basemapIndex < (basemapsArray.customBasemaps.length as number); basemapIndex++) {\n      const customBasemap = basemapsArray.customBasemaps[basemapIndex] as TypeJsonObject;\n      const basemap = api.maps[mapId].basemap.createCustomBasemap(customBasemap as unknown as TypeBasemapProps, projection);\n      if (basemap) setBasemapList((prevArray) => [...prevArray, basemap]);\n\n      // custom basemap are provided set it by default (can't be set as basemap from geoview config)\n      if (basemap && basemapIndex === 0 && activeBasemapId === '') {\n        setBasemap(basemap.basemapId!);\n        isInit = true;\n      }\n    }\n\n    // create the core basemap\n    for (let basemapIndex = 0; basemapIndex < (basemapsArray.coreBasemaps.length as number); basemapIndex++) {\n      const basemapOptions = basemapsArray.coreBasemaps[basemapIndex] as TypeJsonObject;\n      // eslint-disable-next-line no-await-in-loop\n      const basemap = await api.maps[mapId].basemap.createCoreBasemap(basemapOptions as unknown as TypeBasemapOptions, projection);\n\n      // get thumbnail and info (name and description) for core basemap\n      const { name, description } = getInfo(basemap.type.split('-'));\n      basemap.thumbnailUrl = getThumbnailUrl(basemap.type.split('-'), storeProjection, language);\n      basemap.name = name;\n      basemap.description = description;\n\n      if (basemap) setBasemapList((prevArray) => [...prevArray, basemap]);\n\n      // set basemap if previously selected in previous projection\n      const id = `${basemapOptions.shaded ? 'shaded' : ''}${basemapOptions.id}${basemapOptions.labeled ? 'label' : ''}`;\n      if (basemap && id === activeBasemapId && !isInit) {\n        setBasemap(activeBasemapId);\n        isInit = true;\n      }\n    }\n\n    // if previous basemap does not exist in previous projection, init first one\n    if (!isInit) setBasemap(basemapList[0] as string);\n  };\n\n  /**\n   * Set new projection view and basemap array\n   *\n   * @param {SelectChangeEvent} event select change element event\n   */\n  const setSelectedProjection = (event: SelectChangeEvent<unknown>) => {\n    const projection = event.target.value as TypeValidMapProjectionCodes;\n\n    // set basemap to no geom to clean up the view\n    setBasemap('nogeom');\n    setMapProjection(projection as TypeValidMapProjectionCodes);\n\n    createBasemapArray(projection);\n\n    // emit an event to let know map view projection as changed\n    myMap.setProjection(projection);\n  };\n\n  /**\n   * load existing basemaps and create new basemaps\n   */\n  useEffect(() => {\n    createBasemapArray(mapProjection);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [language]);\n\n  return (\n    <Box sx={sxClasses.basemapCard}>\n      {canSwichProjection && (\n        <Select\n          fullWidth\n          labelId=\"projection-label\"\n          value={mapProjection}\n          onChange={setSelectedProjection}\n          label=\"Projection\"\n          style={{\n            display: config.canSwichProjection ? 'flex' : 'none',\n          }}\n          inputLabel={{\n            id: 'projection-label',\n          }}\n          menuItems={projections.map((value: number) => ({\n            key: value,\n            item: {\n              value,\n              children: `EPSG:${value}`,\n            },\n          }))}\n        />\n      )}\n      {basemapList.map((basemap: TypeBasemapProps) => {\n        return (\n          <Card\n            tabIndex={0}\n            className={basemap.basemapId === activeBasemapId ? 'active' : ''}\n            onClick={() => setBasemap(basemap.basemapId as string)}\n            onKeyPress={() => setBasemap(basemap.basemapId as string)}\n            key={basemap.basemapId}\n            title={basemap.name}\n            contentCard={\n              <>\n                {typeof basemap.thumbnailUrl === 'string' && (\n                  <img src={basemap.thumbnailUrl} alt={basemap.altText} className=\"basemapCardThumbnail\" />\n                )}\n                {Array.isArray(basemap.thumbnailUrl) &&\n                  (basemap.thumbnailUrl as string[]).map((thumbnail, index) => {\n                    // eslint-disable-next-line react/no-array-index-key\n                    return <img key={index} src={thumbnail} alt={basemap.altText} className=\"basemapCardThumbnail\" />;\n                  })}\n                <div className=\"basemapCardThumbnailOverlay\" />\n              </>\n            }\n          />\n        );\n      })}\n    </Box>\n  );\n}\n","/* @ts-expect-error there is no mui style in this package */\nexport const getSxClasses = (theme) => ({\n  basemapCard: {\n    '& .MuiCard-root': {\n      backgroundColor: theme.palette.grey.A700,\n      color: theme.palette.primary.light,\n      display: 'flex',\n      flexDirection: 'column',\n      backgroundClip: 'padding-box',\n      border: '1px solid rgba(255,255,255,0.25)',\n      borderRadius: '6px',\n      boxShadow: 'none',\n      marginBottom: '16px',\n      width: '300px',\n      transition: 'all 0.3s ease-in-out',\n      '&:last-child': {\n        marginBottom: '0px',\n      },\n    },\n    '& .MuiCardHeader-root': {\n      backgroundColor: `${theme.palette.grey.A700} !important`,\n      color: theme.basemapPanel.header,\n      fontSize: 14,\n      fontWeight: 400,\n      margin: 0,\n      padding: '0 12px',\n      height: 60,\n      width: '100%',\n      order: 2,\n    },\n    '& .MuiCardContent-root': {\n      order: 1,\n      height: 190,\n      position: 'relative',\n      padding: 0,\n      '&:last-child': {\n        padding: 0,\n      },\n      '& .basemapCardThumbnail': {\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        objectFit: 'cover',\n        top: 0,\n        left: 0,\n      },\n      '& .basemapCardThumbnailOverlay': {\n        display: 'block',\n        height: '100%',\n        width: '100%',\n        position: 'absolute',\n        backgroundColor: theme.basemapPanel.overlayDefault,\n        transition: 'all 0.3s ease-in-out',\n      },\n    },\n    '&:hover': {\n      cursor: 'pointer',\n      borderColor: theme.basemapPanel.borderHover,\n      '& .MuiCardContent-root': {\n        '& .basemapCardThumbnailOverlay': {\n          backgroundColor: theme.basemapPanel.overlayHover,\n        },\n      },\n    },\n    '&.active': {\n      borderColor: theme.basemapPanel.borderActive,\n      '& .MuiCardContent-root': {\n        '& .basemapCardThumbnailOverlay': {\n          backgroundColor: theme.basemapPanel.overlayActive,\n        },\n      },\n      '&:hover': {\n        borderColor: 'rgba(255,255,255,0.75)',\n        '& .MuiCardContent-root': {\n          '& .basemapCardThumbnailOverlay': {\n            backgroundColor: 'rgba(0,0,0,0)',\n          },\n        },\n      },\n    },\n  },\n});\n","import {\n  Cast,\n  AbstractPlugin,\n  TypePluginOptions,\n  TypeIconButtonProps,\n  TypeButtonPanel,\n  TypeWindow,\n  toJsonObject,\n  TypePanelProps,\n  TypeJsonObject,\n  AnySchemaObject,\n} from 'geoview-core';\n\nimport { BasemapPanel } from './basemap-panel';\nimport schema from '../schema.json';\nimport defaultConfig from '../default-config-basemap-panel.json';\n\nconst w = window as TypeWindow;\n\n/**\n * Create a class for the plugin instance\n */\nclass BasemapPanelPlugin extends AbstractPlugin {\n  // store the created button panel object\n  buttonPanel: TypeButtonPanel | null;\n\n  constructor(pluginId: string, props: TypePluginOptions) {\n    super(pluginId, props);\n    this.buttonPanel = null;\n  }\n\n  /**\n   * Return the package schema\n   *\n   * @returns {AnySchemaObject} the package schema\n   */\n  schema = (): AnySchemaObject => schema;\n\n  /**\n   * Return the default config for this package\n   *\n   * @returns {TypeJsonObject} the default config\n   */\n  defaultConfig = (): TypeJsonObject => toJsonObject(defaultConfig);\n\n  /**\n   * translations object to inject to the viewer translations\n   */\n  translations = toJsonObject({\n    en: {\n      basemapPanel: {\n        title: 'Basemaps',\n        info: {\n          transport: {\n            name: 'Transport',\n            description: `The Canada Base Map - Transportation (CBMT). This web mapping service provides spatial reference context with an emphasis on transportation networks. \n                          It is designed especially for use as a background map in a web mapping application or geographic information system (GIS).`,\n          },\n          simple: {\n            name: 'Simple',\n          },\n          shaded: {\n            name: 'Shaded relief',\n            description: `The Canada Base Map - Elevation (CBME) web mapping services of the Earth Sciences Sector at Natural Resources Canada, \n                          is intended primarily for online mapping application users and developers`,\n          },\n          osm: {\n            name: 'Open Street Maps',\n          },\n          nogeom: {\n            name: 'No geometry',\n          },\n          label: {\n            name: 'with labels',\n          },\n        },\n      },\n    },\n    fr: {\n      basemapPanel: {\n        title: 'Fond de carte',\n        info: {\n          transport: {\n            name: 'Transport',\n            description: `Carte de base du Canada - Transport (CBCT). Ce service de cartographie Web offre un contexte de référence spatiale axé sur les réseaux de transport. \n                          Il est particulièrement conçu pour être utilisé comme fond de carte dans une application cartographique Web ou un système d'information géographique (SIG).`,\n          },\n          simple: {\n            name: 'Simple',\n          },\n          shaded: {\n            name: 'Relief ombré',\n            description: `Les services de cartographie Web de la carte de base du Canada - élévation (CBCE) du Secteur des sciences de la \n                          Terre de Ressources naturelles Canada sont destinés principalement aux utilisateurs et aux développeurs d'applications de cartographie en ligne.`,\n          },\n          osm: {\n            name: 'Carte - Open Street Maps',\n          },\n          nogeom: {\n            name: 'Pas de géométrie',\n          },\n          label: {\n            name: 'avec étiquettes',\n          },\n        },\n      },\n    },\n  });\n\n  /**\n   * Added function called after the plugin has been initialized\n   */\n  added = (): void => {\n    const { configObj, pluginProps } = this as AbstractPlugin;\n\n    const { mapId } = pluginProps;\n\n    // access the cgpv object from the window object\n    const { cgpv } = w;\n\n    if (cgpv) {\n      // access the api calls\n      const { api, ui } = cgpv;\n      const { MapIcon } = ui.elements;\n\n      // button props\n      const button: TypeIconButtonProps = {\n        id: 'basemapPanelButton',\n        tooltip: 'basemapPanel.title',\n        tooltipPlacement: 'right',\n        children: <MapIcon />,\n        visible: true,\n      };\n\n      // panel props\n      const panel: TypePanelProps = {\n        title: 'basemapPanel.title',\n        icon: <MapIcon />,\n        width: 350,\n        status: configObj?.isOpen as boolean,\n      };\n\n      // create a new button panel on the app-bar\n      this.buttonPanel = api.maps[mapId].appBarButtons.createAppbarPanel(button, panel, null);\n      // set panel content\n      this.buttonPanel?.panel?.changeContent(<BasemapPanel mapId={mapId} config={configObj || {}} />);\n    }\n  };\n\n  /**\n   * Function called when the plugin is removed, used for clean up\n   */\n  removed(): void {\n    const { mapId } = (this as AbstractPlugin).pluginProps;\n\n    // access the cgpv object from the window object\n    const { cgpv } = w;\n\n    if (cgpv) {\n      // access the api calls\n      const { api } = cgpv;\n\n      if (this.buttonPanel) {\n        api.maps[mapId].appBarButtons.removeAppbarPanel(this.buttonPanel.buttonPanelId);\n\n        // reset basemaps array\n        api.maps[mapId].basemap.basemaps = [];\n        // reload default basemap\n        api.maps[mapId].basemap.loadDefaultBasemaps();\n      }\n    }\n  }\n}\n\nexport default BasemapPanelPlugin;\n\nw.plugins = w.plugins || {};\nw.plugins['basemap-panel'] = Cast<AbstractPlugin>(BasemapPanelPlugin);\n"],"names":["w","window","BasemapPanel","props","mapId","config","cgpv","myMap","api","maps","ui","react","_ui$elements","elements","Select","Card","Box","useState","useEffect","sxClasses","theme","basemapCard","backgroundColor","palette","grey","A700","color","primary","light","display","flexDirection","backgroundClip","border","borderRadius","boxShadow","marginBottom","width","transition","concat","basemapPanel","header","fontSize","fontWeight","margin","padding","height","order","position","objectFit","top","left","overlayDefault","cursor","borderColor","borderHover","overlayHover","borderActive","overlayActive","getSxClasses","useTheme","_useState","_useState2","_slicedToArray","basemapList","setBasemapList","_useState3","_useState4","activeBasemapId","setActiveBasemapId","_useState5","canSwichProjection","projections","supportedProjections","map","obj","projectionCode","storeProjection","useMapProjection","_useState7","_useState8","mapProjection","setMapProjection","language","useAppDisplayLanguage","getThumbnailUrl","basemapTypes","projection","displayLanguage","thumbnailUrls","typeIndex","length","_myMap$basemap$basema","_myMap$basemap$basema2","_myMap$basemap$basema3","_myMap$basemap$basema4","_myMap$basemap$basema5","type","basemap","basemapsList","transport","url","push","replace","simple","shaded","label","replaceAll","getInfo","name","description","includes","getLocalizedMessage","setBasemap","basemapId","find","item","undefined","createBasemapArray","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","basemapsArray","isInit","_loop","basemapIndex","_loop2","_basemapIndex","_context3","prev","next","toJsonObject","customBasemap","_context","customBasemaps","createCustomBasemap","prevArray","_toConsumableArray","stop","delegateYield","basemapOptions","_getInfo","id","_context2","coreBasemaps","createCoreBasemap","sent","split","thumbnailUrl","labeled","_x","apply","arguments","_jsxs","sx","children","_jsx","fullWidth","labelId","value","onChange","event","target","setProjection","style","inputLabel","menuItems","key","tabIndex","className","onClick","onKeyPress","title","contentCard","_Fragment","src","alt","altText","Array","isArray","thumbnail","index","BasemapPanelPlugin","_AbstractPlugin","_inherits","_super","_createSuper","pluginId","_this","_classCallCheck","call","_defineProperty","_assertThisInitialized","schema","defaultConfig","en","info","osm","nogeom","fr","configObj","pluginProps","_this$buttonPanel","MapIcon","button","tooltip","tooltipPlacement","visible","panel","icon","status","isOpen","buttonPanel","appBarButtons","createAppbarPanel","changeContent","_createClass","this","removeAppbarPanel","buttonPanelId","basemaps","loadDefaultBasemaps","AbstractPlugin","plugins","Cast"],"sourceRoot":""}